name: Run E2E and RPC Tests

on:
  pull_request:    

jobs:
  parseoutput:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v3
      with:
        lfs: "true"
      name: Check out code

    - name: Check whats mounted
      run: docker run busybox -v ${{ github.workspace }}:/work ls -lah /work

    - name: Create a files
      run: docker run busybox -v ${{ github.workspace }}:/work echo 'hi' > /work/results.xml

    - name: Check whats in the workspace again
      run: ls -lah

    - name: Publish test results
      uses: EnricoMi/publish-unit-test-result-action@v1
      if: always()
      with:
        files: output.xml
        check_name: "Test results"